!function(t,e,i){function n(n,s){this.options=t.extend({},r,s),this.element=n,this.$window=t(e),this.$document=t(i),this.init()}var s="weeble",r={target:null};n.prototype={init:function(){void 0===this.$menu&&(this.$menu=t(this.element).addClass("weeble-menu"),this.$menu.on("click","li",this.menuItemClickHandler.bind(this)),this.$document.on("contextmenu",this.options.target,this.contextMenuHandler.bind(this)))},contextMenuHandler:function(t){t.preventDefault(),this.$menu.css({top:t.pageY,left:t.pageX}).show(),this.$document.one("click",function(){this.$menu.hide()}.bind(this))},menuItemClickHandler:function(e){var i=t(e.target);i.is("li")||(i=i.parents("li:first"));var n=t("li",this.$menu).index(i[0])+1;this._trigger("onItemClick",[i,n])},_trigger:function(e,i){var n=t.Event(s+"_"+e);return i?i.unshift(this):i=[this],this.element.triggerHandler(n,i),n.isDefaultPrevented()===!1}},t.fn[s]=function(e){var i=t.isPlainObject(e)?e:{},r=t.data(this,"plugin_"+s);if(r){if("string"==typeof e&&r[e]&&t.isFunction(r[e])){var u=arguments.length>=2?Array.prototype.slice.call(arguments,1):[],o=r[e].apply(r,u);return void 0===o?this:o}return this}return r=new n(this,i),t.data(this,"plugin_"+s,r),this}}(jQuery,window,document);
